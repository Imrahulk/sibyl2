import './polyfills.server.mjs';
import{E as U,F as P,G as F,H as j,I as V,J as N,K as R,L as O,M as z,P as H,T as $,W as y,a as A,b as p,c as E,d as T,e as d,f as x,g as v,h as w,i as s,j as S,k as h,l as c,m as n,n as i,o as k,p as b,q as f,r as l,s as o,t as g,u as _,v as D,w as M}from"./chunk-LWXV7DRC.mjs";var L=(()=>{class e{constructor(t){this.http=t,this.clientId="458808227161899",this.redirectUri="https://localhost:4200/",this.clientSecret="2a84699cf327d52e4f62fdff10dc4a0d"}login(){let t=`https://www.instagram.com/oauth/authorize?client_id=${this.clientId}&redirect_uri=${encodeURIComponent(this.redirectUri)}&response_type=code&scope=instagram_business_basic,instagram_business_manage_messages,instagram_business_manage_comments,instagram_business_content_publish`;window.location.href=t}fetchAccessToken(t){let r="https://api.instagram.com/api/oauth/access_token",a=new j().set("client_id",this.clientId).set("client_secret",this.clientSecret).set("grant_type","authorization_code").set("redirect_uri",this.redirectUri).set("code",t),I={"Content-Type":"application/x-www-form-urlencoded"};return this.http.post(r,a.toString(),{headers:I})}fetchUserDetails(t){let r=`https://graph.instagram.com/me?fields=id,username&access_token=${t}`;return this.http.get(r)}fetchPostDetails(t){let r=`https://graph.instagram.com/me/media?fields=id,caption,media_type,media_url,permalink,thumbnail_url,timestamp&access_token=${t}`;return this.http.get(r)}static{this.\u0275fac=function(r){return new(r||e)(E(V))}}static{this.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function J(e,m){if(e&1&&(n(0,"div")(1,"h4",19),o(2,"Access Token"),i(),n(3,"div",20),o(4),i()()),e&2){let t=l(2);s(4),_(" ",t.accessToken," ")}}function K(e,m){if(e&1){let t=b();n(0,"section",15)(1,"h4"),o(2,"Authorization Code"),i(),n(3,"div",16),o(4),i(),n(5,"button",17),f("click",function(){x(t);let a=l();return v(a.fetchAccessToken())}),o(6," Fetch Access Token "),i(),h(7,J,5,1,"div",18),i()}if(e&2){let t=l();s(4),_(" ",t.authCode," "),s(3),c("ngIf",t.accessToken)}}function Q(e,m){if(e&1&&(n(0,"div")(1,"h4",19),o(2,"User Details:"),i(),n(3,"div",20)(4,"p"),o(5),i(),n(6,"p"),o(7),i()()()),e&2){let t=l(2);s(5),_("ID: ",t.user.id,""),s(2),_("Username: ",t.user.username,"")}}function W(e,m){if(e&1){let t=b();n(0,"section",15)(1,"button",21),f("click",function(){x(t);let a=l();return v(a.fetchUserDetails())}),o(2," Fetch User Details "),i(),h(3,Q,8,2,"div",18),i()}if(e&2){let t=l();s(3),c("ngIf",t.user)}}function X(e,m){if(e&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td"),k(8,"img",26),i(),n(9,"td")(10,"a",27),o(11,"View Post"),i()(),n(12,"td"),o(13),D(14,"date"),i()()),e&2){let t=m.$implicit;s(2),g(t.id),s(2),g(t.caption?t.caption:"N/A"),s(2),g(t.media_type),s(2),c("src",t.media_url,w),s(2),c("href",t.permalink,w),s(3),g(M(14,6,t.timestamp,"short"))}}function Y(e,m){if(e&1&&(n(0,"div")(1,"h4",19),o(2,"Post Details:"),i(),n(3,"div",23)(4,"table",24)(5,"thead")(6,"tr")(7,"th"),o(8,"ID"),i(),n(9,"th"),o(10,"Caption"),i(),n(11,"th"),o(12,"Media Type"),i(),n(13,"th"),o(14,"Media"),i(),n(15,"th"),o(16,"Permalink"),i(),n(17,"th"),o(18,"Timestamp"),i()()(),n(19,"tbody"),h(20,X,15,9,"tr",25),i()()()()),e&2){let t=l(2);s(20),c("ngForOf",t.postData)}}function Z(e,m){if(e&1){let t=b();n(0,"section",15)(1,"button",22),f("click",function(){x(t);let a=l();return v(a.fetchPostDetails())}),o(2," Fetch Feed Data "),i(),h(3,Y,21,1,"div",18),i()}if(e&2){let t=l();s(3),c("ngIf",t.postData.length>0)}}var u=(()=>{class e{constructor(t,r){this.instagramService=t,this.route=r,this.clientId="458808227161899",this.redirectUri="https://localhost:4200/",this.clientSecret="2a84699cf327d52e4f62fdff10dc4a0d",this.authCode=null,this.accessToken=null,this.postData=[],this.user=null,this.route.queryParams.subscribe(a=>{this.authCode=a.code||null})}login(){this.instagramService.login()}fetchAccessToken(){this.authCode&&this.instagramService.fetchAccessToken(this.authCode).subscribe(t=>{this.accessToken=t.access_token})}fetchUserDetails(){this.accessToken&&this.instagramService.fetchUserDetails(this.accessToken).subscribe(t=>{debugger;this.user=t})}fetchPostDetails(){this.accessToken&&this.instagramService.fetchPostDetails(this.accessToken).subscribe(t=>{debugger;this.postData=t.data,console.log(this.postData)})}static{this.\u0275fac=function(r){return new(r||e)(S(L),S($))}}static{this.\u0275cmp=T({type:e,selectors:[["app-root"]],decls:22,vars:3,consts:[[1,"d-flex","flex-column","min-vh-100"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container-fluid","d-flex","justify-content-between","align-items-center"],["href","#",1,"navbar-brand","d-flex","align-items-center"],["src","assets/DLogo.png",2,"width","157px","height","auto","margin-right","8px"],[1,"mx-auto",2,"font-size","34px","font-weight","bold"],[1,"flex-grow-1","overflow-auto","p-3","border","border-secondary","rounded","shadow-sm"],[1,"d-flex","flex-column",2,"max-height","calc(100vh - 150px)","overflow-y","auto"],[1,"d-flex","flex-column","align-items-center",2,"min-width","600px"],[1,"mb-2"],[1,"btn","btn-primary",3,"click"],["style","min-width: 600px",4,"ngIf"],[1,"bg-light","text-center","text-lg-start","mt-auto","sticky-bottom"],[1,"container","p-4"],[1,"text-center"],[2,"min-width","600px"],[1,"border","p-2","rounded","bg-light",2,"min-height","40px"],[1,"btn","btn-secondary","mt-4",3,"click"],[4,"ngIf"],[1,"mt-4"],[1,"border","p-2","rounded","bg-light",2,"min-height","40px","word-wrap","break-word"],[1,"btn","btn-success","mt-4",3,"click"],[1,"btn","btn-warning","mt-4",3,"click"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["alt","Media",2,"width","100px","height","auto",3,"src"],["target","_blank",3,"href"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),k(4,"img",4),i(),n(5,"span",5),o(6," Instagram API Integration POC "),i()()(),n(7,"div",6)(8,"main",7)(9,"section",8)(10,"label",9),o(11,"Instagram Login"),i(),n(12,"button",10),f("click",function(){return a.login()}),o(13,"Login"),i()(),h(14,K,8,2,"section",11)(15,W,4,1,"section",11)(16,Z,4,1,"section",11),i()(),n(17,"footer",12)(18,"div",13)(19,"div",14)(20,"p"),o(21,"\xA9 \xA9 2024 All Rights Reserved, DELPHI Consulting"),i()()()()()),r&2&&(s(14),c("ngIf",a.authCode),s(),c("ngIf",a.accessToken),s(),c("ngIf",a.accessToken))},dependencies:[U,P,F],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}footer[_ngcontent-%COMP%]{width:100%}"]})}}return e})();var tt=[{path:"",component:u}],B=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=p({imports:[y.forRoot(tt),y]})}}return e})();var q=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=d({type:e,bootstrap:[u]})}static{this.\u0275inj=p({providers:[z(),N(R())],imports:[O,B]})}}return e})();var et=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=d({type:e,bootstrap:[u]})}static{this.\u0275inj=p({imports:[q,H]})}}return e})();export{et as a};
